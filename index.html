<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport"
          content="width=device-width; initial-scale=1; maximum-scale=1; minimum-scale=1; user-scalable=no;">
    <title>U-YOUNG</title>
    <link rel="stylesheet" href="./css/style.css" type="text/css">
    <link rel="stylesheet" href="./css/normalize.css" type="text/css">
    <script src="https://cdn.staticfile.org/jquery/1.10.2/jquery.min.js"></script>
    <script src="./js/ejs.js"></script>
</head>
<body onload="checkCookie()">
<!--sidebar-->
<section id = "sidebar">
    <div class="sidebar">
        <nav>
            <ul>
                <li><a href="#main">欢迎</a></li>
                <li><a href="#intro">关于我们</a></li>
                <li><a href="#plans">我们的目的地</a></li>
                <li><a href="#three">联系我们</a></li>
                <li><a href="login.html">登陆/注册</a></li>
            </ul>
        </nav>
    </div>
</section>

<!--main page-->
<section id = "main">
    <div class="main" style="background-image: url(images/image_8.jpg);">
        <h1>U-YOUNG</h1>
        <p class = 'main_text'>If you're interested, please join us !</p>
        <p>This is </p>
        <p class = "title">U-YOUNG</p>
    </div>
</section>

<!--introduction of the team-->
<section id = "intro">
    <div class="intro">
        <h1>Intro</h1>
        <div>
            <p>我们是一家专注于小众目的地的旅行公司</p>
            <p>点击More查看网站说明</p>
            <ul class="actions">
                <li><a href="introduction.html" class="button">More</a></li>
            </ul>
        </div>

    </div>
</section>

<!--The destination of the travelling plan-->
<section id = "plans">
    <div class="left">
        <h1>Travel</h1>
        <div class="more">
            <div class="add_new">
                <a href="add_new.html" class="button">Add New</a>
            </div>
        </div>
    </div>

    <div class="card">

        <div class="travel-entry" id="plan2">
            <!--        图片-->
            <div class="img" style="background-image: url(images/image_2.jpg);"></div>
            <!--        文字-->
            <div class="text">
                <div class="info">
                    <a href="./detail.html?id=2" class="pub_date" target="_blank">2022/8/25</a>
                    <a href="./detail.html?id=2" class="sum" target="_blank">66个小伙伴想去这里</a>
                    <a href="./detail.html?id=2" class="comments" target="_blank">评论：6</a>
                </div>
                <h3>
                    <a href="./detail.html?id=2" class="heading" target="_blank">北疆秋色</a>
                </h3>
            </div>
        </div>
        <div class="travel-entry" id="plan3">
            <!--        图片-->
            <div class="img" style="background-image: url(images/image_3.jpg);"></div>
            <!--        文字-->
            <div class="text">
                <div class="info">
                    <a href="./detail.html?id=3" class="pub_date">2022/7/26</a>
                    <a href="./detail.html?id=3" class="sum">789个小伙伴想去这里</a>
                    <a href="./detail.html?id=3" class="comments">评论：36</a>
                </div>
                <h3>
                    <a href="./detail.html?id=3" class="heading">火星漫游</a>
                </h3>
            </div>
        </div>

        <div class="travel-entry" id="plan4">
            <!--        图片-->
            <div class="img" style="background-image: url(images/image_4.jpg);"></div>
            <!--        文字-->
            <div class="text">
                <div class="info">
                    <a href="./detail.html?id=4" class="pub_date">2022/7/26</a>
                    <a href="./detail.html?id=4" class="sum">79个小伙伴想去这里</a>
                    <a href="./detail.html?id=4" class="comments">评论：36</a>
                </div>
                <h3>
                    <a href="./detail.html?id=4" class="heading">川西秘境</a>
                </h3>
            </div>
        </div>

        <div class="travel-entry" id="plan5">
            <!--        图片-->
            <div class="img" style="background-image: url(images/image_5.jpg);"></div>
            <!--        文字-->
            <div class="text">
                <div class="info">
                    <a href="./detail.html?id=5" class="pub_date">2022/7/26</a>
                    <a href="./detail.html?id=5" class="sum">79个小伙伴想去这里</a>
                    <a href="./detail.html?id=5" class="comments">评论：386</a>
                </div>
                <h3>
                    <a href="./detail.html?id=5" class="heading">喜马拉雅</a>
                </h3>
            </div>
        </div>

        <div class="travel-entry" id="plan6">
            <!--        图片-->
            <div class="img" style="background-image: url(images/image_6.jpg);"></div>
            <!--        文字-->
            <div class="text">
                <div class="info">
                    <a href="./detail.html?id=6" class="pub_date">2022/7/26</a>
                    <a href="./detail.html?id=6" class="sum">79个小伙伴想去这里</a>
                    <a href="./detail.html?id=6" class="comments">评论：386</a>
                </div>
                <h3>
                    <a href="./detail.html?id=6" class="heading">伊犁の夏</a>
                </h3>
            </div>
        </div>

    </div>
</section>

<!--contact us-->
<section id="three">
    <div class="contact_block">
        <div class="left">
            <h2>Contact</h2>
            <p>
                interested ?<br>
                contact us !
            </p>
        </div>
        <div class="split_style1">
            <section>
                <form method="post" action="#">
                    <div class="fields">
                        <div class="field half">
                            <label for="name">昵称</label>
                            <input type="text" name="name" id="name" />
                        </div>
                        <div class="field half">
                            <label for="email">邮箱</label>
                            <input type="text" name="email" id="email" />
                        </div>
                        <div class="field">
                            <label for="message">留言</label>
                            <textarea name="message" id="message" rows="5"></textarea>
                        </div>
                    </div>
                    <ul class="actions">
                        <li><a href="" class="button submit">发送</a></li>
                    </ul>
                </form>
            </section>
            <section>
                <ul class="contact">
                    <li>
                        <h3>办公地点</h3>
                        <span>
                            滨江区 **号<br />
                            浙江, 杭州<br />
                        </span>
                    </li>
                    <li>
                        <h3>公众号</h3>
                        <a href="#">游氧旅行</a>
                    </li>
                    <li>
                        <h3>微信号</h3>
                        <span>uyong0001</span>
                    </li>
                    <li>
                        <h3>社交媒体</h3>
                        <ul class="icons">
                            <li><a href="#" class="icon_weixin"></a></li>
                            <li><a href="https://weibo.com/u/7134909773" target="_blank" class="icon_weibo"> </a></li>
                            <li><a href="https://www.xiaohongshu.com/user/profile/5aababafe8ac2b4ff3a25623?xhsshare=WeixinSession&appuid=5fee9ac9000000000100b89b&apptime=1666583546" target="_blank" class="icon_red">小红书</a></li>
                        </ul>
                    </li>
                </ul>
            </section>
        </div>
    </div>
</section>
</body>
<script src="js/main.js"></script>
<script>
    var detail_list;
    if (localStorage.hasOwnProperty("detail_list")){  //存在
        detail_list = JSON.parse(localStorage.getItem("detail_list"));
        for (let i = 0; i < detail_list.length; i++) {
            let str_i = i.toString();
            if (localStorage.hasOwnProperty("detail"+str_i)) {
                detail_list[i].likes = JSON.parse(localStorage.getItem("detail"+str_i)).comments.likes;
                detail_list[i].comments = JSON.parse(localStorage.getItem("detail"+str_i)).comments.comments_list.length;
            }
        }
        localStorage.setItem("detail_list", JSON.stringify(detail_list));
        render('./tpl/detail_list.ejs', $('#plans .card'), detail_list, "is");
    }
    else {
        // 如果LocalStorage不存在，则从获取json中使用.ajax的GET方法读取数据
        $.ajax({
            url: "./data/detail_list.json",//json文件位置
            type: "GET",//请求方式为get
            dataType: "json", //返回数据格式为json
            success: getData //请求成功完成后要执行的方法
        })

    }
    function getData(data) {
        detail_list = data["detail_list"];
        /**
         * LocalStorage中不存在，将JSON数据存在LS中
         */
        localStorage.setItem("detail_list", JSON.stringify(detail_list));
        render('./tpl/detail_list.ejs', $('#plans .card'), detail_list, "is");
    }
    function render(tpl_url, base, obj, type) {
        $.get(tpl_url, function (result){
            var html = ejs.compile(result)(obj);
            if (type === "append") base.append(html);
            else if (type === "prepend") base.prepend(html);
            else if (type === "is") base.html(html);
        })
    }
</script>
</html>